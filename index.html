<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shut The Box Helper</title>
<!--   <link rel="stylesheet" href="simple-v1.css"> -->
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background-color: #f0f0f0;
    }
    .button-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }
    .blue-button {
      background-color: #007BFF; /* Bootstrap-like blue */
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .blue-button:hover {
      background-color: #0056b3; /* darker blue on hover */
    }
    
    .blue-button:active {
      transform: scale(0.96);
    }
    .button-row button {
      padding: 16px 24px;
      font-size: 1rem;
      border-radius: 10px;
      flex: 1 1 calc(33.333% - 20px);
      max-width: 120px;
      box-sizing: border-box;
    }
    
    .action-button {
      width: 100%;
      padding: 16px 0;
      font-size: 1.1rem;
      height: 60px;
      border-radius: 10px;
      background-color: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
      box-sizing: border-box;
    }
    
    .action-button:hover {
      background-color: #0056b3;
    }

    button.active {
      background-color: #4caf50;
      color: white;
      transform: scale(0.96);
      transition: transform 0.05s ease;
    }
    .button-actions {
      width: 100%;
      margin-top: 10px;
    }
    #submit-btn {
      margin-top: 20px;
    }
    #result {
      margin: 30px auto 20px auto;
      font-size: 32px;
      font-weight: bold;
      text-align: center;
      max-width: 80%;
      padding: 20px;
      background-color: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>

  <h2>Toggle Buttons 1–10 (ON/OFF)</h2>
  <div class="button-row" id="toggle-buttons"></div>

  <h2>Dice Sum Buttons (2 to 12)</h2>
  <div class="button-row" id="dice-sum-buttons"></div>
<div id="result"></div>
<div class="button-actions">
  <button id="submit-btn" class="action-button">Submit</button>
</div>
<div class="button-actions">
  <button id="reset-btn" class="action-button">Reset</button>
</div>
  
  
    <div id="debug">
    <h3>Debug Info</h3>
    <p><strong>Toggle Key Sent:</strong> <span id="debug-toggle-key"></span></p>
    <p><strong>Dice Sum Sent:</strong> <span id="debug-dice-sum"></span></p>
  </div>
  <script>
    const clickSound = new Audio('click_V1.mp3');
    const toggleContainer = document.getElementById('toggle-buttons');
    const diceContainer = document.getElementById('dice-sum-buttons');
    const resultDisplay = document.getElementById('result');
    const defaultActiveSum = 7;
    let activeSumBtn = null;
    let localData = {};

    // Load JSON file
    fetch('best_choice.json')
      .then(response => response.json())
      .then(data => {
        localData = data;
      })
      .catch(err => {
        console.error("Error loading JSON:", err);
        resultDisplay.textContent = "Failed to load game data.";
      });

    // Create toggle buttons
    for (let i = 1; i <= 10; i++) {
      const btn = document.createElement('button');
      btn.dataset.index = i;
      btn.dataset.state = 'on';
      btn.classList.add('active');
      btn.innerHTML = `<span class="btn-label">${i}</span>`;

      btn.addEventListener('click', () => {
        clickSound.play();
        if (btn.dataset.state === 'off') {
          btn.dataset.state = 'on';
          btn.classList.add('active');
          stateSpan.textContent = 'ON';
        } else {
          btn.dataset.state = 'off';
          btn.classList.remove('active');
          stateSpan.textContent = 'OFF';
        }
      });

      toggleContainer.appendChild(btn);
    }

    // Create dice sum buttons
    for (let sum = 2; sum <= 12; sum++) {
      const diceBtn = document.createElement('button');
      diceBtn.textContent = `${sum}`;
      diceBtn.dataset.sum = sum;

      if (sum === defaultActiveSum) {
        diceBtn.classList.add('active');
        activeSumBtn = diceBtn;
      }

      diceBtn.addEventListener('click', () => {
        clickSound.play();
        if (activeSumBtn) activeSumBtn.classList.remove('active');
        if (activeSumBtn === diceBtn) {
          activeSumBtn = null;
        } else {
          diceBtn.classList.add('active');
          activeSumBtn = diceBtn;
        }
      });

      diceContainer.appendChild(diceBtn);
    }

    // Submit button logic
    document.getElementById('submit-btn').addEventListener('click', () => {
    clickSound.play();
    const activeIndices = Array.from(toggleContainer.children)
        .filter(btn => btn.dataset.state === 'on')
        .map(btn => parseInt(btn.dataset.index));

    // Format key with spaces
    const key = JSON.stringify(activeIndices, null, 0).replace(/,/g, ', ');

    // Get selected dice sum and stringify it
    const diceSum = activeSumBtn ? String(activeSumBtn.dataset.sum) : null;

    // Show debug info
    document.getElementById('debug-toggle-key').textContent = key;
    document.getElementById('debug-dice-sum').textContent = diceSum ?? 'None';

    // Check against loaded data
    if (localData[key] && localData[key][diceSum]) {
        resultDisplay.textContent = localData[key][diceSum];
    } else {
        const remainingSum = activeIndices.reduce((acc, val) => acc + val, 0);
        resultDisplay.textContent = `Game Over — Remaining Total: ${remainingSum}`;
    }
    });
  document.getElementById('reset-btn').addEventListener('click', () => {
    clickSound.play();
    // Turn all toggle buttons ON
    Array.from(toggleContainer.children).forEach(btn => {
      btn.dataset.state = 'on';
      btn.classList.add('active');
    });
  
    // Clear the result and debug info
    resultDisplay.textContent = '';
    document.getElementById('debug-toggle-key').textContent = '';
    document.getElementById('debug-dice-sum').textContent = '';
  });

  </script>

</body>
</html>















